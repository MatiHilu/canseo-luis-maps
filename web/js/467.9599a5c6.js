"use strict";(self["webpackChunkcanseo"]=self["webpackChunkcanseo"]||[]).push([[467],{7209:function(e,a,s){var t=s(9669),o=s.n(t);const i=o().create({baseURL:"https://canseo.site/api/api",headers:{"Content-type":"application/json"}});i.interceptors.request.use((e=>{const a=localStorage.getItem("Authorization");return a&&(e.headers.common["Authorization"]=`${a}`),e}),(e=>Promise.reject(e))),a.Z=i},2498:function(e,a,s){var t=s(7209);const o={getAll(){return t.Z.get("/barrios")},get(e){return t.Z.get(`/barrios/${e}`)}};a.Z=o},1677:function(e,a,s){var t=s(7209),o=s(9560);const i={getAll(){return o.Z.setAuthHeader(),t.Z.get("/paseadores")},getByBarrio(e,a,s,i){return o.Z.setAuthHeader(),t.Z.get(`/paseadores/by-barrio/${e}?diaSemana=${a}&fecha=${s}&hora=${i}`,{params:{dia_semana:a}})},login(e){return o.Z.setAuthHeader(),t.Z.post("/paseadores/login",e)},get(e){return o.Z.setAuthHeader(),t.Z.get(`/paseadores/${e}`)},create(e){return o.Z.setAuthHeader(),t.Z.post("/paseadores/register",e)},update(e,a){return o.Z.setAuthHeader(),t.Z.put(`/paseadores/${e}`,a)},changePassword(e,a){return o.Z.setAuthHeader(),t.Z.put(`/paseadores/${e}/change-password`,a)},delete(e){return o.Z.setAuthHeader(),t.Z.delete(`/paseadores/${e}`)},deleteAll(){return o.Z.setAuthHeader(),t.Z.delete("/paseadores")}};a.Z=i},4360:function(e,a,s){s.d(a,{Z:function(){return $}});var t=s(6252),o=s(3577);const i=e=>((0,t.dD)("data-v-c2526fdc"),e=e(),(0,t.Cn)(),e),r={key:0},l={class:"menu-mobile-box"},n=i((()=>(0,t._)("img",{src:"https://canseo-vue.vercel.app/uploads/CanSeo-Paseador.png",alt:"CanSeo Paseador"},null,-1))),d=i((()=>(0,t._)("img",{class:"icon",src:"https://canseo-vue.vercel.app/uploads/imagen-hamburguesa.png",alt:"Menú Hamburguesa"},null,-1))),c=[d],u=i((()=>(0,t._)("img",{class:"icon",src:"https://canseo-vue.vercel.app/uploads/imagen-cerrar.png",alt:"Cerrar Menú"},null,-1))),p=[u],m={class:"navbar-nav mr-auto"},f={class:"nav-item"},g={class:"nav-item"},v={class:"navbar-nav"},b={class:"nav-item"},h={key:1,class:"navbar navbar-expand navbar-light"},_=i((()=>(0,t._)("img",{src:"https://canseo-vue.vercel.app/uploads/CanSeo-Paseador.png",alt:"CanSeo"},null,-1))),D={class:"navbar-nav mr-auto mtop-10"},Z={class:"nav-item"},P={class:"nav-item"},w={class:"navbar-nav mtop-10"},M={class:"nav-item"};function k(e,a,s,i,d,u){const k=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",null,[d.isMobile?((0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",l,[(0,t.Wm)(k,{to:"/reservas-paseador",class:"navbar-brand img-canseo-mobile"},{default:(0,t.w5)((()=>[n])),_:1}),(0,t._)("div",{onClick:a[0]||(a[0]=(...e)=>u.toggleMobileMenu&&u.toggleMobileMenu(...e)),class:"menu-button"},c)]),(0,t._)("div",{class:(0,o.C_)({"mobile-menu":!0,open:d.isMobileMenuOpen})},[(0,t._)("div",{onClick:a[1]||(a[1]=(...e)=>u.toggleMobileMenu&&u.toggleMobileMenu(...e)),class:"close-button"},p),(0,t._)("div",m,[(0,t._)("li",f,[(0,t.Wm)(k,{to:"/reservas-paseador",class:"nav-link"},{default:(0,t.w5)((()=>[(0,t.Uk)("Mis paseos")])),_:1})]),(0,t._)("li",g,[(0,t.Wm)(k,{to:"/perfil/paseador",class:"nav-link"},{default:(0,t.w5)((()=>[(0,t.Uk)("Perfil")])),_:1})])]),(0,t._)("div",v,[(0,t._)("li",b,[(0,t._)("a",{class:"nav-link",onClick:a[2]||(a[2]=(...e)=>u.logout&&u.logout(...e))},"Cerrar sesión")])])],2)])):((0,t.wg)(),(0,t.iD)("nav",h,[(0,t.Wm)(k,{to:"/reservas-paseador",class:"navbar-brand"},{default:(0,t.w5)((()=>[_])),_:1}),(0,t._)("div",D,[(0,t._)("li",Z,[(0,t.Wm)(k,{to:"/reservas-paseador",class:"nav-link"},{default:(0,t.w5)((()=>[(0,t.Uk)("Mis paseos")])),_:1})]),(0,t._)("li",P,[(0,t.Wm)(k,{to:"/perfil/paseador",class:"nav-link"},{default:(0,t.w5)((()=>[(0,t.Uk)("Perfil")])),_:1})])]),(0,t._)("div",w,[(0,t._)("li",M,[(0,t._)("a",{class:"nav-link",onClick:a[3]||(a[3]=(...e)=>u.logout&&u.logout(...e))},"Cerrar sesión")])])]))])}s(7658);var C=s(7239),y={name:"NavPaseador",data(){return{isMobileMenuOpen:!1,isMobile:window.innerWidth<=768}},created(){window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},methods:{logout(){C.Z.dispatch("logout"),C.Z.commit("setNotification","success"),C.Z.commit("setMessage","Sesión cerrada correctamente"),this.$router.push("/login/paseadores"),setTimeout((()=>{C.Z.commit("setNotification",null),C.Z.commit("setMessage",null)}),1e4)},handleResize(){this.isMobile=window.innerWidth<=768},toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}}},U=s(3744);const A=(0,U.Z)(y,[["render",k],["__scopeId","data-v-c2526fdc"]]);var $=A},7467:function(e,a,s){s.r(a),s.d(a,{default:function(){return F}});var t=s(6252),o=s(3577),i=s(9963);const r=e=>((0,t.dD)("data-v-f6f47344"),e=e(),(0,t.Cn)(),e),l={class:"general"},n=r((()=>(0,t._)("h1",null,"Editar perfil",-1))),d={class:"form-group"},c=r((()=>(0,t._)("label",{for:"nombre"},"Nombre:",-1))),u={class:"form-group"},p=r((()=>(0,t._)("label",{for:"apellido"},"Apellido:",-1))),m={class:"form-group"},f=r((()=>(0,t._)("label",{for:"email"},"Email:",-1))),g={class:"form-group"},v=r((()=>(0,t._)("label",{for:"telefono"},"Teléfono:",-1))),b={class:"form-group"},h=r((()=>(0,t._)("label",{for:"direccion"},"Dirección:",-1))),_={class:"form-group"},D=r((()=>(0,t._)("label",{for:"descripcion"},"Descripción:",-1))),Z={class:"form-group"},P=r((()=>(0,t._)("label",{for:"barrio"},"Barrio:",-1))),w=["value"],M={class:"form-group"},k=r((()=>(0,t._)("label",{for:"dias_disponibles"},[(0,t.Uk)("Días disponibles"),(0,t._)("span",null,[(0,t.Uk)(" ("),(0,t._)("span",{class:"circulo-verde"}),(0,t.Uk)(" Días Seleccionados)")])],-1))),C={class:"selected-items"},y=["onClick"],U={class:"form-group"},A=r((()=>(0,t._)("label",{for:"foto_perfil"},"Cambiar foto de perfil",-1))),$={class:"foto-flex"},H=r((()=>(0,t._)("span",{class:"span-foto"},"Foto de perfil actual",-1))),S=["src"],z=r((()=>(0,t._)("div",{class:"caja-flex"},[(0,t._)("button",{type:"submit"},"Guardar cambios")],-1)));function N(e,a,s,r,N,x){const E=(0,t.up)("NavPaseador"),W=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(E),(0,t._)("div",l,[x.notification?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,o.C_)(["notification",x.notificationClass])},(0,o.zw)(x.message),3)):(0,t.kq)("",!0),n,(0,t._)("form",{onSubmit:a[8]||(a[8]=(0,i.iM)(((...e)=>x.updateProfile&&x.updateProfile(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,t._)("div",d,[c,(0,t.wy)((0,t._)("input",{type:"text",id:"nombre","onUpdate:modelValue":a[0]||(a[0]=e=>N.updatedPaseadorData.nombre=e),required:""},null,512),[[i.nr,N.updatedPaseadorData.nombre]])]),(0,t._)("div",u,[p,(0,t.wy)((0,t._)("input",{type:"text",id:"apellido","onUpdate:modelValue":a[1]||(a[1]=e=>N.updatedPaseadorData.apellido=e),required:""},null,512),[[i.nr,N.updatedPaseadorData.apellido]])]),(0,t._)("div",m,[f,(0,t.wy)((0,t._)("input",{type:"email",id:"email","onUpdate:modelValue":a[2]||(a[2]=e=>N.updatedPaseadorData.email=e),required:""},null,512),[[i.nr,N.updatedPaseadorData.email]])]),(0,t._)("div",g,[v,(0,t.wy)((0,t._)("input",{type:"text",id:"telefono","onUpdate:modelValue":a[3]||(a[3]=e=>N.updatedPaseadorData.telefono=e),required:""},null,512),[[i.nr,N.updatedPaseadorData.telefono]])]),(0,t._)("div",b,[h,(0,t.wy)((0,t._)("input",{type:"text",id:"direccion","onUpdate:modelValue":a[4]||(a[4]=e=>N.updatedPaseadorData.direccion=e),required:""},null,512),[[i.nr,N.updatedPaseadorData.direccion]])]),(0,t._)("div",_,[D,(0,t.wy)((0,t._)("textarea",{id:"descripcion","onUpdate:modelValue":a[5]||(a[5]=e=>N.updatedPaseadorData.descripcion=e)},null,512),[[i.nr,N.updatedPaseadorData.descripcion]])]),(0,t._)("div",Z,[P,(0,t.wy)((0,t._)("select",{id:"barrio","onUpdate:modelValue":a[6]||(a[6]=e=>N.updatedPaseadorData.id_barrio=e),required:""},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(N.barrios,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.id,key:e.id},(0,o.zw)(e.nombre),9,w)))),128))],512),[[i.bM,N.updatedPaseadorData.id_barrio]])]),(0,t._)("div",M,[k,(0,t._)("div",null,[(0,t._)("div",C,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(N.diasDisponibles,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a,class:(0,o.C_)(["selected-item",{active:N.selectedDias.includes(e)}]),onClick:a=>x.toggleDiaSeleccionado(e)},(0,o.zw)("domingo"===e?"Domingo":"lunes"===e?"Lunes":"martes"===e?"Martes":"miercoles"===e?"Miércoles":"jueves"===e?"Jueves":"viernes"===e?"Viernes":"sabado"===e?"Sábado":N.mapeoDias[e]),11,y)))),128))])])]),(0,t._)("div",U,[A,(0,t._)("input",{type:"file",id:"foto_perfil",onChange:a[7]||(a[7]=(...e)=>x.handleFileUpload&&x.handleFileUpload(...e))},null,32),(0,t._)("div",$,[H,(0,t._)("img",{class:"img-perfil",src:x.getImageUrl(N.paseador.foto_perfil||"/uploads/default-profile.png"),alt:"Foto de perfil"},null,8,S)])]),z,(0,t._)("span",null,[(0,t.Wm)(W,{to:"/perfil/paseador",class:"nav-link"},{default:(0,t.w5)((()=>[(0,t.Uk)("Cancelar")])),_:1})])],32)])],64)}s(7658);var x=s(1677),E=s(2498),W=s(7239),j=s(4360),q={name:"PerfilPaseador",components:{NavPaseador:j.Z},data(){return{paseador:{},updatedPaseadorData:{},barrios:[],diasDisponibles:["domingo","lunes","martes","miercoles","jueves","viernes","sabado"],selectedDias:[],mapeoDias:{domingo:"domingo",lunes:"lunes",martes:"martes",miercoles:"miercoles",jueves:"jueves",viernes:"viernes",sabado:"sabado"},file:null}},mounted(){const e=W.Z.getters.getClientId;this.fetchPaseador(e),this.fetchBarrios()},computed:{notification(){return W.Z.getters.getNotification},message(){return W.Z.getters.getMessage},notificationClass(){return{error:"error"===this.notification,success:"success"===this.notification}}},methods:{handleFileUpload(e){this.updatedPaseadorData.foto_perfil=e.target.files[0]},fetchPaseador(e){x.Z.get(e).then((e=>{this.paseador=e.data,this.updatedPaseadorData={...this.paseador},this.selectedDias=this.paseador.dias_disponibles.map((e=>this.mapeoDias[e]))})).catch((e=>{console.log("Error al obtener el perfil del paseador: ",e)}))},fetchBarrios(){E.Z.getAll().then((e=>{this.barrios=e.data})).catch((e=>{console.log("Error al obtener la lista de barrios: ",e)}))},updateProfile(){const e=W.Z.getters.getClientId,a=new FormData;a.append("nombre",this.updatedPaseadorData.nombre),a.append("apellido",this.updatedPaseadorData.apellido),a.append("email",this.updatedPaseadorData.email),a.append("telefono",this.updatedPaseadorData.telefono),a.append("direccion",this.updatedPaseadorData.direccion),a.append("descripcion",this.updatedPaseadorData.descripcion),a.append("id_barrio",this.updatedPaseadorData.id_barrio),a.append("foto_perfil",this.updatedPaseadorData.foto_perfil);const s=this.selectedDias.map((e=>this.diasDisponibles.find((a=>this.mapeoDias[a]===e))));for(const t of s)a.append("dias_disponibles[]",t);console.log("Datos enviados al backend:",Object.fromEntries(a)),x.Z.update(e,a).then((()=>{const e=this.updatedPaseadorData.id_barrio,a=this.barrios.find((a=>a.id===e));this.paseador.nombre_barrio=a?a.nombre:"",this.$router.push("/perfil/paseador"),W.Z.commit("setNotification","success"),W.Z.commit("setMessage","Perfil Editado con éxito"),setTimeout((()=>{W.Z.commit("setNotification",null),W.Z.commit("setMessage",null)}),5e3)})).catch((e=>{console.log("Error al actualizar el perfil del paseador: ",e),W.Z.commit("setNotification","error"),W.Z.commit("setMessage","Error al editar el perfil"),this.$router.push("/editar-paseador/"),setTimeout((()=>{W.Z.commit("setNotification",null),W.Z.commit("setMessage",null)}),5e3)}))},toggleDiaSeleccionado(e){this.selectedDias.includes(e)?this.selectedDias=this.selectedDias.filter((a=>a!==e)):this.selectedDias.push(e)},getImageUrl(e){if(e){const a=e.replace("vue","").replace("public",""),s=window.location.origin;return`${s}/${a}`}}}},V=s(3744);const I=(0,V.Z)(q,[["render",N],["__scopeId","data-v-f6f47344"]]);var F=I}}]);
//# sourceMappingURL=467.9599a5c6.js.map