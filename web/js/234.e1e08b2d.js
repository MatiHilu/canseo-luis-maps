"use strict";(self["webpackChunkcanseo"]=self["webpackChunkcanseo"]||[]).push([[234],{7209:function(e,s,t){var a=t(9669),r=t.n(a);const o=r().create({baseURL:"https://canseo.site/api",headers:{"Content-type":"application/json"}});o.interceptors.request.use((e=>{const s=localStorage.getItem("Authorization");return s&&(e.headers.common["Authorization"]=`${s}`),e}),(e=>Promise.reject(e))),s.Z=o},5712:function(e,s,t){var a=t(7209),r=t(9560);const o={getAll(){return r.Z.setAuthHeader(),a.Z.get("/clientes")},login(e){return r.Z.setAuthHeader(),a.Z.post("/clientes/login",e)},get(e){return r.Z.setAuthHeader(),a.Z.get(`/clientes/${e}`)},create(e){return r.Z.setAuthHeader(),a.Z.post("/clientes/register",e)},update(e,s){return r.Z.setAuthHeader(),a.Z.put(`/clientes/${e}`,s)},changePassword(e,s){return r.Z.setAuthHeader(),a.Z.put(`/clientes/${e}/change-password`,s)},delete(e){return r.Z.setAuthHeader(),a.Z.delete(`/clientes/${e}`)},deleteAll(){return r.Z.setAuthHeader(),a.Z.delete("/clientes")}};s.Z=o},234:function(e,s,t){t.r(s),t.d(s,{default:function(){return U}});var a=t(6252),r=t(3577),o=t(9963);const i=e=>((0,a.dD)("data-v-719361c4"),e=e(),(0,a.Cn)(),e),n={class:"general"},l={class:"password-form"},c=i((()=>(0,a._)("h2",null,"Cambiar Contraseña",-1))),u={class:"form-group password-input"},d=i((()=>(0,a._)("label",{for:"current-password"},"Contraseña Actual:",-1))),p=["type"],w={key:0,src:"https://canseo-vue.vercel.app/uploads/show-password.png",alt:"Mostrar contraseña"},m={key:1,src:"https://canseo-vue.vercel.app/uploads/hide-password.png",alt:"Ocultar contraseña"},g={class:"form-group password-input"},h=i((()=>(0,a._)("label",{for:"new-password"},"Nueva Contraseña:",-1))),v=["type"],f={key:0,src:"https://canseo-vue.vercel.app/uploads/show-password.png",alt:"Mostrar contraseña"},b={key:1,src:"https://canseo-vue.vercel.app/uploads/hide-password.png",alt:"Ocultar contraseña"},C={class:"form-group password-input"},_=i((()=>(0,a._)("label",{for:"confirm-password"},"Confirmar Contraseña:",-1))),P=["type"],Z={key:0,src:"https://canseo-vue.vercel.app/uploads/show-password.png",alt:"Mostrar contraseña"},y={key:1,src:"https://canseo-vue.vercel.app/uploads/hide-password.png",alt:"Ocultar contraseña"},M=i((()=>(0,a._)("button",{type:"submit"},"Guardar Cambios",-1))),k={key:0,class:"error-message"};function N(e,s,t,i,N,D){const A=(0,a.up)("NavCliente");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(A),(0,a._)("div",n,[D.notification?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,r.C_)(["notification",D.notificationClass])},(0,r.zw)(D.message),3)):(0,a.kq)("",!0),(0,a._)("div",l,[c,(0,a._)("form",{onSubmit:s[6]||(s[6]=(0,o.iM)(((...e)=>D.submitForm&&D.submitForm(...e)),["prevent"]))},[(0,a._)("div",u,[d,(0,a.wy)((0,a._)("input",{id:"current-password","onUpdate:modelValue":s[0]||(s[0]=e=>N.currentPassword=e),type:D.currentPasswordFieldType,required:"",placeholder:"Contraseña actual"},null,8,p),[[o.YZ,N.currentPassword]]),(0,a._)("span",{type:"button",onClick:s[1]||(s[1]=(...e)=>D.toggleCurrentPasswordVisibility&&D.toggleCurrentPasswordVisibility(...e))},[N.showCurrentPassword?((0,a.wg)(),(0,a.iD)("img",w)):((0,a.wg)(),(0,a.iD)("img",m))])]),(0,a._)("div",g,[h,(0,a.wy)((0,a._)("input",{id:"new-password","onUpdate:modelValue":s[2]||(s[2]=e=>N.newPassword=e),type:D.newPasswordFieldType,required:"",placeholder:"Nueva contraseña"},null,8,v),[[o.YZ,N.newPassword]]),(0,a._)("span",{type:"button",onClick:s[3]||(s[3]=(...e)=>D.toggleNewPasswordVisibility&&D.toggleNewPasswordVisibility(...e))},[N.showNewPassword?((0,a.wg)(),(0,a.iD)("img",f)):((0,a.wg)(),(0,a.iD)("img",b))])]),(0,a._)("div",C,[_,(0,a.wy)((0,a._)("input",{id:"confirm-password","onUpdate:modelValue":s[4]||(s[4]=e=>N.confirmPassword=e),type:D.confirmPasswordFieldType,required:"",placeholder:"Confirmar contraseña"},null,8,P),[[o.YZ,N.confirmPassword]]),(0,a._)("span",{type:"button",onClick:s[5]||(s[5]=(...e)=>D.toggleConfirmPasswordVisibility&&D.toggleConfirmPasswordVisibility(...e))},[N.showConfirmPassword?((0,a.wg)(),(0,a.iD)("img",Z)):((0,a.wg)(),(0,a.iD)("img",y))])]),M,N.errorMessage?((0,a.wg)(),(0,a.iD)("p",k,(0,r.zw)(N.errorMessage),1)):(0,a.kq)("",!0)],32)])])],64)}t(7658);var D=t(5712),A=t(7239),V=t(1012),W={name:"CambiarContrasenalCliente",components:{NavCliente:V.Z},data(){return{currentPassword:"",newPassword:"",confirmPassword:"",errorMessage:"",showCurrentPassword:!1,showNewPassword:!1,showConfirmPassword:!1}},computed:{notification(){return A.Z.getters.getNotification},message(){return A.Z.getters.getMessage},notificationClass(){return{error:"error"===this.notification,success:"success"===this.notification}},currentPasswordFieldType(){return this.showCurrentPassword?"text":"password"},newPasswordFieldType(){return this.showNewPassword?"text":"password"},confirmPasswordFieldType(){return this.showConfirmPassword?"text":"password"}},methods:{submitForm(){if(this.newPassword!==this.confirmPassword)return A.Z.commit("setNotification","error"),A.Z.commit("setMessage","Las contraseñas no coinciden"),this.$router.push("/cambiar-contrasena/cliente"),void setTimeout((()=>{A.Z.commit("setNotification",null),A.Z.commit("setMessage",null)}),5e3);const e=A.Z.getters.getClientId,s={currentPassword:this.currentPassword,newPassword:this.newPassword,confirmPassword:this.confirmPassword};D.Z.changePassword(e,s).then((()=>{A.Z.commit("setNotification","success"),A.Z.commit("setMessage","Contraseña cambiada con éxito"),this.$router.push("/perfil/cliente"),setTimeout((()=>{A.Z.commit("setNotification",null),A.Z.commit("setMessage",null)}),5e3)})).catch((e=>{console.log("Error al cambiar la contraseña del cliente: ",e),A.Z.commit("setNotification","error"),A.Z.commit("setMessage","Error al cambiar la contraseña"),this.$router.push("/cambiar-contrasena/cliente"),setTimeout((()=>{A.Z.commit("setNotification",null),A.Z.commit("setMessage",null)}),5e3)}))},toggleCurrentPasswordVisibility(){this.showCurrentPassword=!this.showCurrentPassword},toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword},toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}}},H=t(3744);const T=(0,H.Z)(W,[["render",N],["__scopeId","data-v-719361c4"]]);var U=T},1012:function(e,s,t){t.d(s,{Z:function(){return H}});var a=t(6252),r=t(3577);const o=e=>((0,a.dD)("data-v-2293848b"),e=e(),(0,a.Cn)(),e),i={key:0},n={class:"menu-mobile-box"},l=o((()=>(0,a._)("img",{src:"https://canseo-vue.vercel.app/uploads/CanSeo.png",alt:"CanSeo"},null,-1))),c=o((()=>(0,a._)("img",{class:"icon",src:"https://canseo-vue.vercel.app/uploads/imagen-hamburguesa.png",alt:"Menú Hamburguesa"},null,-1))),u=[c],d=o((()=>(0,a._)("img",{class:"icon",src:"https://canseo-vue.vercel.app/uploads/imagen-cerrar.png",alt:"Cerrar Menú"},null,-1))),p=[d],w={class:"navbar-nav mr-auto"},m={class:"nav-item"},g={class:"nav-item"},h={class:"nav-item"},v={class:"navbar-nav"},f={class:"nav-item"},b={key:1,class:"navbar navbar-expand navbar-light"},C=o((()=>(0,a._)("img",{src:"https://canseo-vue.vercel.app/uploads/CanSeo.png",alt:"CanSeo"},null,-1))),_={class:"navbar-nav mr-auto mtop-10"},P={class:"nav-item"},Z={class:"nav-item"},y={class:"nav-item"},M={class:"navbar-nav mtop-10"},k={class:"nav-item"};function N(e,s,t,o,c,d){const N=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",null,[c.isMobile?((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",n,[(0,a.Wm)(N,{to:"/",class:"navbar-brand img-canseo-mobile"},{default:(0,a.w5)((()=>[l])),_:1}),(0,a._)("div",{onClick:s[0]||(s[0]=(...e)=>d.toggleMobileMenu&&d.toggleMobileMenu(...e)),class:"menu-button"},u)]),(0,a._)("div",{class:(0,r.C_)({"mobile-menu":!0,open:c.isMobileMenuOpen})},[(0,a._)("div",{onClick:s[1]||(s[1]=(...e)=>d.toggleMobileMenu&&d.toggleMobileMenu(...e)),class:"close-button"},p),(0,a._)("div",w,[(0,a._)("li",m,[(0,a.Wm)(N,{to:"/",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservar")])),_:1})]),(0,a._)("li",g,[(0,a.Wm)(N,{to:"/reservas-cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservas")])),_:1})]),(0,a._)("li",h,[(0,a.Wm)(N,{to:"/perfil/cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Perfil")])),_:1})])]),(0,a._)("div",v,[(0,a._)("li",f,[(0,a._)("a",{class:"nav-link",onClick:s[2]||(s[2]=(...e)=>d.logout&&d.logout(...e))},"Cerrar sesión")])])],2)])):((0,a.wg)(),(0,a.iD)("nav",b,[(0,a.Wm)(N,{to:"/",class:"navbar-brand"},{default:(0,a.w5)((()=>[C])),_:1}),(0,a._)("div",_,[(0,a._)("li",P,[(0,a.Wm)(N,{to:"/",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservar")])),_:1})]),(0,a._)("li",Z,[(0,a.Wm)(N,{to:"/reservas-cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservas")])),_:1})]),(0,a._)("li",y,[(0,a.Wm)(N,{to:"/perfil/cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Perfil")])),_:1})])]),(0,a._)("div",M,[(0,a._)("li",k,[(0,a._)("a",{class:"nav-link",onClick:s[3]||(s[3]=(...e)=>d.logout&&d.logout(...e))},"Cerrar sesión")])])]))])}t(7658);var D=t(7239),A={name:"NavCliente",data(){return{isMobileMenuOpen:!1,isMobile:window.innerWidth<=768}},created(){window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},methods:{logout(){D.Z.dispatch("logout"),D.Z.commit("setNotification","success"),D.Z.commit("setMessage","Sesión cerrada correctamente"),this.$router.push("/login/clientes"),setTimeout((()=>{D.Z.commit("setNotification",null),D.Z.commit("setMessage",null)}),1e4)},handleResize(){this.isMobile=window.innerWidth<=768},toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}}},V=t(3744);const W=(0,V.Z)(A,[["render",N],["__scopeId","data-v-2293848b"]]);var H=W}}]);
//# sourceMappingURL=234.e1e08b2d.js.map