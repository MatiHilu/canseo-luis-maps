"use strict";(self["webpackChunkcanseo"]=self["webpackChunkcanseo"]||[]).push([[298],{7209:function(e,t,n){var a=n(9669),i=n.n(a);const s=i().create({baseURL:"https://canseo.site/api/api",headers:{"Content-type":"application/json"}});s.interceptors.request.use((e=>{const t=localStorage.getItem("Authorization");return t&&(e.headers.common["Authorization"]=`${t}`),e}),(e=>Promise.reject(e))),t.Z=s},2498:function(e,t,n){var a=n(7209);const i={getAll(){return a.Z.get("/barrios")},get(e){return a.Z.get(`/barrios/${e}`)}};t.Z=i},5712:function(e,t,n){var a=n(7209),i=n(9560);const s={getAll(){return i.Z.setAuthHeader(),a.Z.get("/clientes")},login(e){return i.Z.setAuthHeader(),a.Z.post("/clientes/login",e)},get(e){return i.Z.setAuthHeader(),a.Z.get(`/clientes/${e}`)},create(e){return i.Z.setAuthHeader(),a.Z.post("/clientes/register",e)},update(e,t){return i.Z.setAuthHeader(),a.Z.put(`/clientes/${e}`,t)},changePassword(e,t){return i.Z.setAuthHeader(),a.Z.put(`/clientes/${e}/change-password`,t)},delete(e){return i.Z.setAuthHeader(),a.Z.delete(`/clientes/${e}`)},deleteAll(){return i.Z.setAuthHeader(),a.Z.delete("/clientes")}};t.Z=s},1298:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(6252),i=n(3577);const s=e=>((0,a.dD)("data-v-5aff862e"),e=e(),(0,a.Cn)(),e),l={class:"general"},r=s((()=>(0,a._)("h1",null,"Mi perfil",-1))),o={class:"img-usuario"},c=["src"],u=s((()=>(0,a._)("button",null,"Editar perfil",-1))),d=s((()=>(0,a._)("button",null,"Cambiar contraseña",-1)));function m(e,t,n,s,m,g){const p=(0,a.up)("NavCliente"),h=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(p),(0,a._)("div",l,[g.notification?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,i.C_)(["notification",g.notificationClass])},(0,i.zw)(g.message),3)):(0,a.kq)("",!0),r,(0,a._)("div",null,[(0,a._)("div",o,[(0,a._)("p",null,"Nombre: "+(0,i.zw)(m.cliente.nombre)+" "+(0,i.zw)(m.cliente.apellido),1),(0,a._)("img",{class:"img-perfil",src:g.getImageUrl(m.cliente.foto_perfil||"/uploads/default-profile.png"),alt:"Foto de perfil"},null,8,c)]),(0,a._)("p",null,"Email: "+(0,i.zw)(m.cliente.email),1),(0,a._)("p",null,"Teléfono: "+(0,i.zw)(m.cliente.telefono),1),(0,a._)("p",null,"Dirección: "+(0,i.zw)(m.cliente.direccion)+", "+(0,i.zw)(m.cliente.nombre_barrio),1),(0,a._)("p",null,"Mi perro: "+(0,i.zw)(m.cliente.nombre_perro)+", "+(0,i.zw)(m.cliente.nombre_raza),1)]),(0,a.Wm)(h,{to:"/editar-cliente/"},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(h,{class:"cambiar-contrasena",to:"/cambiar-contrasena/cliente"},{default:(0,a.w5)((()=>[d])),_:1})])],64)}var g=n(5712),p=n(2498),h=n(7239),v=n(1012),b={name:"PerfilCliente",components:{NavCliente:v.Z},data(){return{cliente:{},showForm:!1,updatedClienteData:{},barrios:[],showPasswordForm:!1,changePassword:!1,cancelPasswordChange:!1}},mounted(){const e=h.Z.getters.getClientId;this.fetchCliente(e),this.fetchBarrios()},computed:{notification(){return h.Z.getters.getNotification},message(){return h.Z.getters.getMessage},notificationClass(){return{error:"error"===this.notification,success:"success"===this.notification}}},methods:{fetchCliente(e){g.Z.get(e).then((e=>{this.cliente=e.data,this.updatedClienteData={...this.cliente}})).catch((e=>{console.log("Error al obtener el perfil del cliente: ",e)}))},fetchBarrios(){p.Z.getAll().then((e=>{this.barrios=e.data})).catch((e=>{console.log("Error al obtener la lista de barrios: ",e)}))},showEditForm(){this.showForm=!0},updateProfile(){const e=h.Z.getters.getClientId;g.Z.update(e,this.updatedClienteData).then((()=>{const e=this.updatedClienteData.id_barrio,t=this.barrios.find((t=>t.id===e));this.cliente.nombre_barrio=t?t.nombre:"",this.showForm=!1})).catch((e=>{console.log("Error al actualizar el perfil del cliente: ",e)}))},cancelEdit(){this.showForm=!1},togglePasswordForm(){this.showPasswordForm=!this.showPasswordForm},cancelPasswordForm(){this.showPasswordForm=!1},getImageUrl(e){if(e){const t=e.replace("vue","").replace("public",""),n=window.location.origin;return`${n}/${t}`}}}},f=n(3744);const _=(0,f.Z)(b,[["render",m],["__scopeId","data-v-5aff862e"]]);var w=_},1012:function(e,t,n){n.d(t,{Z:function(){return E}});var a=n(6252),i=n(3577);const s=e=>((0,a.dD)("data-v-2293848b"),e=e(),(0,a.Cn)(),e),l={key:0},r={class:"menu-mobile-box"},o=s((()=>(0,a._)("img",{src:"https://canseo-vue.vercel.app/uploads/CanSeo.png",alt:"CanSeo"},null,-1))),c=s((()=>(0,a._)("img",{class:"icon",src:"https://canseo-vue.vercel.app/uploads/imagen-hamburguesa.png",alt:"Menú Hamburguesa"},null,-1))),u=[c],d=s((()=>(0,a._)("img",{class:"icon",src:"https://canseo-vue.vercel.app/uploads/imagen-cerrar.png",alt:"Cerrar Menú"},null,-1))),m=[d],g={class:"navbar-nav mr-auto"},p={class:"nav-item"},h={class:"nav-item"},v={class:"nav-item"},b={class:"navbar-nav"},f={class:"nav-item"},_={key:1,class:"navbar navbar-expand navbar-light"},w=s((()=>(0,a._)("img",{src:"https://canseo-vue.vercel.app/uploads/CanSeo.png",alt:"CanSeo"},null,-1))),Z={class:"navbar-nav mr-auto mtop-10"},C={class:"nav-item"},k={class:"nav-item"},M={class:"nav-item"},z={class:"navbar-nav mtop-10"},A={class:"nav-item"};function P(e,t,n,s,c,d){const P=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",null,[c.isMobile?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",r,[(0,a.Wm)(P,{to:"/",class:"navbar-brand img-canseo-mobile"},{default:(0,a.w5)((()=>[o])),_:1}),(0,a._)("div",{onClick:t[0]||(t[0]=(...e)=>d.toggleMobileMenu&&d.toggleMobileMenu(...e)),class:"menu-button"},u)]),(0,a._)("div",{class:(0,i.C_)({"mobile-menu":!0,open:c.isMobileMenuOpen})},[(0,a._)("div",{onClick:t[1]||(t[1]=(...e)=>d.toggleMobileMenu&&d.toggleMobileMenu(...e)),class:"close-button"},m),(0,a._)("div",g,[(0,a._)("li",p,[(0,a.Wm)(P,{to:"/",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservar")])),_:1})]),(0,a._)("li",h,[(0,a.Wm)(P,{to:"/reservas-cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservas")])),_:1})]),(0,a._)("li",v,[(0,a.Wm)(P,{to:"/perfil/cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Perfil")])),_:1})])]),(0,a._)("div",b,[(0,a._)("li",f,[(0,a._)("a",{class:"nav-link",onClick:t[2]||(t[2]=(...e)=>d.logout&&d.logout(...e))},"Cerrar sesión")])])],2)])):((0,a.wg)(),(0,a.iD)("nav",_,[(0,a.Wm)(P,{to:"/",class:"navbar-brand"},{default:(0,a.w5)((()=>[w])),_:1}),(0,a._)("div",Z,[(0,a._)("li",C,[(0,a.Wm)(P,{to:"/",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservar")])),_:1})]),(0,a._)("li",k,[(0,a.Wm)(P,{to:"/reservas-cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Reservas")])),_:1})]),(0,a._)("li",M,[(0,a.Wm)(P,{to:"/perfil/cliente",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Perfil")])),_:1})])]),(0,a._)("div",z,[(0,a._)("li",A,[(0,a._)("a",{class:"nav-link",onClick:t[3]||(t[3]=(...e)=>d.logout&&d.logout(...e))},"Cerrar sesión")])])]))])}n(7658);var W=n(7239),D={name:"NavCliente",data(){return{isMobileMenuOpen:!1,isMobile:window.innerWidth<=768}},created(){window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},methods:{logout(){W.Z.dispatch("logout"),W.Z.commit("setNotification","success"),W.Z.commit("setMessage","Sesión cerrada correctamente"),this.$router.push("/login/clientes"),setTimeout((()=>{W.Z.commit("setNotification",null),W.Z.commit("setMessage",null)}),1e4)},handleResize(){this.isMobile=window.innerWidth<=768},toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}}},F=n(3744);const H=(0,F.Z)(D,[["render",P],["__scopeId","data-v-2293848b"]]);var E=H}}]);
//# sourceMappingURL=298.cb90f3c4.js.map